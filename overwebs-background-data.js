import{GluonElement}from'../gluonjs/gluon.js';const assetPath=window.modulesAssetPath&&window.modulesAssetPath('overwebs-background-data')+'/'||'',mapBackgrounds=(a)=>({to_play:{transition:'play',preload:['play_to_main'],video:`${a}/shared/to_play.mp4`,image:`${a}/shared/to_play.jpg`},to_training:{mirror:'to_play'},play:{preload:['play_to_main'],video:`${a}/shared/play.mp4`,image:`${a}/shared/play.jpg`},training:{mirror:'play'},to_competitive:{transition:'competitive',preload:['competitive_to_play'],video:`${a}/shared/to_competitive.mp4`,image:`${a}/shared/to_competitive.jpg`},to_arcade:{mirror:'to_competitive'},"to_vs-ai":{mirror:'to_competitive'},competitive:{preload:['competitive_to_play'],video:`${a}/shared/competitive.mp4`,image:`${a}/shared/competitive.jpg`},arcade:{mirror:'competitive'},"vs-ai":{mirror:'competitive'},competitive_to_play:{transition:['play'],video:`${a}/shared/competitive_to_play.mp4`,image:`${a}/shared/competitive_to_play.jpg`},arcade_to_play:{mirror:'competitive_to_play'},"vs-ai_to_play":{mirror:'competitive_to_play'},"vs-ai_to_training":{mirror:'competitive_to_play'},"to_hero-gallery":{transition:'hero-gallery',preload:['hero-gallery_to_main'],video:`${a}/shared/to_hero-gallery.mp4`,image:`${a}/shared/to_hero-gallery.jpg`},"hero-gallery":{preload:['hero-gallery_to_main'],video:`${a}/shared/hero-gallery.mp4`,image:`${a}/shared/hero-gallery.jpg`},login:{preload:['to_main'],video:!1,image:'shared/login.jpg'},to_main:{transition:'main',preload:['to_play','to_hero-gallery']},main:{preload:['to_play','to_hero-gallery']},play_to_main:{transition:'main'},training_to_main:{mirror:'play_to_main'},"hero-gallery_to_main":{transition:'main'}}),backgroundSets={halloween:{reaper:mapBackgrounds('halloween'),mercy:mapBackgrounds('halloween')},hollywood:{tracer:mapBackgrounds('hollywood'),bastion:mapBackgrounds('hollywood')},volskaya:{widowmaker:mapBackgrounds('volskaya'),soldier76:mapBackgrounds('volskaya'),genji:mapBackgrounds('volskaya')},gibraltar:{winston:mapBackgrounds('gibraltar'),sombra:mapBackgrounds('gibraltar')},eichenwalde:{mccree:mapBackgrounds('eichenwalde'),roadhog:mapBackgrounds('eichenwalde')},hanamura:{reaper:mapBackgrounds('hanamura'),sombra:mapBackgrounds('hanamura')},kings_row:{reinhardt:mapBackgrounds('kings_row')},temple_of_anubis:{dva:mapBackgrounds('temple_of_anubis'),pharah:mapBackgrounds('temple_of_anubis')}};class OverwebsBackgroundData extends GluonElement{static get observedAttributes(){return['select']}attributeChangedCallback(a,b,c){'select'===a&&(this.select=c)}set select(a){a!==this._select&&(this._select=a,this._selectBackgrounds())}get select(){return this._select}set backgrounds(a){a!==this._backgrounds&&(this._backgrounds=a,this.dispatchEvent(new Event('backgrounds-changed')))}get backgrounds(){return this._backgrounds}set backgroundSelection(a){a!==this._backgroundSelection&&(this._backgroundSelection=a,this.dispatchEvent(new Event('backgroundSelection-changed')))}get backgroundSelection(){return this._backgroundSelection}connectedCallback(){super.connectedCallback(),this.backgrounds||this._selectBackgrounds()}_selectBackgrounds(){let a=this._index(backgroundSets);if(this.select){let b=new RegExp(this.select);a=a.filter((a)=>b.test(a))}if(this.backgroundSelection=a[Math.floor(Math.random()*a.length)],!this.backgroundSelection)return void console.warn('Could not select a backgroundSet');let b=this.backgroundSelection.split('/').slice(0,-1).reduce((a,b)=>a[b],backgroundSets);for(let a in b)if(!b[a].mirror){let c=b[a].video||`${this.backgroundSelection}${a}.mp4`;c=`${assetPath}${c}`;let d=b[a].image||`${this.backgroundSelection}${a}.jpg`;d=`${assetPath}${d}`,!1!==b[a].video&&(b[a].video=c),b[a].image=d}this.backgrounds=b}_index(a){const b=[];for(let c in a){if(a[c].transition||a[c].preload)return[''];Array.prototype.push.apply(b,this._index(a[c]).map((a)=>c+'/'+a))}return b}}customElements.define(OverwebsBackgroundData.is,OverwebsBackgroundData);
//# sourceMappingURL=overwebs-background-data.js.map
